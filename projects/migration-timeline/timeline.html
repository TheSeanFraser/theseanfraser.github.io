---
layout: page
title:  Ontario Bird Migration Timeline
permalink: /projects/migration-timeline
---
<head>
    <script src="js/regionSelectorHandler.js" ></script>
</head>
<body>

    <div class="writing">
        <!-- <p>Visit the <a href="about.html">About page</a> to learn how these dates were calculated.</p> -->
        <p>Below is a list of "mass arrival" dates of each species to the selected region. Some vagrant species are included.</p>
        <p>If viewing on a mobile device, the Fall date list will be listed below the Spring date list.</p>
    
        <!-- Region Selector-->
        <label form="species">Select a region:</label>
        <select name="date" id="regionSelector">
            <option style="display: none">Toronto</option>
        </select>
        <div>&nbsp</div>
        <div class="date_list_holder">
            <div class="column" id="left_col">
                <table class="table table-bordered table-hover table-condensed">
                    <thead>
                    <tr>
                        <th colspan="2">Spring Mass Arrivals</th>
                    </tr>
                    <tr>
                        <th title="Field #1">20 Year AVG</th>
                        <th title="Field #2">Species</th>
                    </tr>
                    </thead>
                    <tbody id="spring_date_list_body">
    
                    </tbody>
                </table>
            </div>
            <div class="column" id="right_col">
                 <table class="table table-bordered table-hover table-condensed">
                    <thead>
                    <tr>
                        <th colspan="2">Fall Mass Arrivals</th>
                    </tr>
                    <tr>
                        <th title="Field #1">20 Year AVG</th>
                        <th title="Field #2">Species</th>
                    </tr>
                    </thead>
                    <tbody id="fall_date_list_body">
    
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    </body>
    <footer>
        <script src="js/displayNewRegionData.js"></script>
        <!-- <script type="text/javascript">
            var path = 'http://numbirds.ca/projects/migration-timeline/media/lists/20_YEARS/';
            var selectRegionButton = document.getElementById("selectRegionButton");
            var region_response;
            var date_list_response, date_list_json;
            console.log(path);

            function populateDatesInTable(region_response)
            {
                var region_code = region_response[document.getElementById("regionSelector").value];
                var spring_source = path + "/spring/"+ region_code + '.json';
                var fall_source = path + "/fall/"+ region_code + '.json';
                console.log(spring_source);

                fetch(spring_source)
                    .then(response => response.json())
                    .then(text => date_list_response = text)
                    .then((response) => {
                        addSpringTable();
                        });

                fetch(fall_source)
                    .then(response => response.json())
                    .then(text => date_list_response = text)
                    .then((response) => {
                        addFallTable();
                        });
                        console.log(response);
            }

            function addSpringTable(data){
                var tbody = document.getElementById("spring_date_list_body");

                // Add each row of the data to its own table element
                for(var i = 0; i < date_list_response.length; i++){
                    var tr = document.createElement("tr");
                    var td_date = document.createElement("td");
                    var td_species = document.createElement("td");
                    var date = date_list_response[i][0]
                    var species = date_list_response[i][1];
                    td_date.textContent = date;
                    td_date.value = date;
                    td_species.textContent = species;
                    td_species.value = species;
                    tr.appendChild(td_date);
                    tr.appendChild(td_species)
                    tbody.appendChild(tr)
                }
            }

            function addFallTable(data){
                var tbody = document.getElementById("fall_date_list_body");

                // Add each row of the data to its own table element
                for(var i = 0; i < date_list_response.length; i++){
                    var tr = document.createElement("tr");
                    var td_date = document.createElement("td");
                    var td_species = document.createElement("td");
                    var date = date_list_response[i][0]
                    var species = date_list_response[i][1];
                    td_date.textContent = date;
                    td_date.value = date;
                    td_species.textContent = species;
                    td_species.value = species;
                    tr.appendChild(td_date);
                    tr.appendChild(td_species)
                    tbody.appendChild(tr)
                }
            }

            var regionSelect = document.getElementById("regionSelector");
            regionSelect.onchange = function (){updateLists()};
            function updateLists() {
                console.log("Button clicked");
                var region = document.getElementById("regionSelector").value;

                // Clear the tables for the new data
                var table = document.getElementById("spring_date_list_body");
                table.innerHTML = "";
                table = document.getElementById("fall_date_list_body");
                table.innerHTML = "";

                fetch('res/regions_complete.json')
                .then(response => response.json())
                .then(text => region_response = text)
                .then((response) => {
                    populateDatesInTable(region_response);
                    });
            }

        </script> -->
    </footer>
    